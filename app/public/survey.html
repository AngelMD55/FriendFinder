<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
        crossorigin="anonymous">
    <title>GOT Friend Finder</title>
</head>

<body>
    <h1>Survey Questions</h1>
    <hr class="my-4">
    <div class="container">
        <h2>About You</h2>
        <form>
            <div class="form-group">
                <label for="name">Name (Required)</label>
                <input type="name" class="form-control" id="nameInput" aria-describedby="nameHelp" required>
            </div>
            <div class="form-group">
                <label for="imageLink">Link to Photo Image (Required)</label>
                <input type="link" class="form-control" id="linkInput" required>
            </div>
        </form>

        <hr class="my-4">
        <div id="questions">
            <div class="mb-3">
                <h3>Question #1</h3>
                <p class="font-weight-bolder">How big of a Game of Thrones fan are you?</p>
                <select id="question1">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">Despice Game of Thrones</option>
                    <option value="2">Dislike Game of Thrones</option>
                    <option value="3">Indiferent of Game of Thrones</option>
                    <option value="4">Like Game of Thrones</option>
                    <option value="5">Love Game of Thrones</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #2</h3>
                <p class="font-weight-bolder">How many Game of Thrones related books have you read?</p>
                <select id="question2">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">0</option>
                    <option value="2">Between 3 and 1</option>
                    <option value="3">Between 6 and 4</option>
                    <option value="4">Between 9 and 7</option>
                    <option value="5">All of them</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #3</h3>
                <p class="font-weight-bolder">Out of these 5 Choices which one is your favorite House?</p>
                <select id="question3">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">Lanister</option>
                    <option value="2">Frey</option>
                    <option value="3">Baratheon</option>
                    <option value="4">Tully</option>
                    <option value="5">Stark</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #4</h3>
                <p class="font-weight-bolder">Do you like to discuss what's going on while the show is playing?</p>
                <select id="question4">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">No at all</option>
                    <option value="2">No</option>
                    <option value="3">Sometimes</option>
                    <option value="4">Yes</option>
                    <option value="5">I love it</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #5</h3>
                <p class="font-weight-bolder">Do you agree that doing something special for each new episode gives you
                    a better experience?</p>
                <select id="question5">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Not sure</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #6</h3>
                <p class="font-weight-bolder">Do you agree that is better to watch the new episode with a lot of
                    people?</p>
                <select id="question6">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">Strongly Disagree</option>
                    <option value="2">Disagree</option>
                    <option value="3">Not sure</option>
                    <option value="4">Agree</option>
                    <option value="5">Strongly Agree</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #7</h3>
                <p class="font-weight-bolder">How likely are you to throw a Game of Thrones theme party?</p>
                <select id="question7">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">Not very likely</option>
                    <option value="2">Not likely</option>
                    <option value="3">Dont care</option>
                    <option value="4">Likely</option>
                    <option value="5">That's my kind of party</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #8</h3>
                <p class="font-weight-bolder">How many time have you watch Game of Thrones?</p>
                <select id="question8">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">One time</option>
                    <option value="2">Two times</option>
                    <option value="3">Three times</option>
                    <option value="4">Four times</option>
                    <option value="5">5+ times</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #9</h3>
                <p class="font-weight-bolder">How likely are you to join a Game of Thrones themed game board club?</p>
                <select id="question9">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">Not very likely</option>
                    <option value="2">Not likely</option>
                    <option value="3">Dont care</option>
                    <option value="4">Likely</option>
                    <option value="5">Very likely</option>
                </select>
            </div>
            <div class="mb-3">
                <h3>Question #10</h3>
                <p class="font-weight-bolder">If you had to fight in the war of the 5 kings, which king would you fight
                    for?</p>
                <select id="question10">
                    <option value="" disabled selected>Select your option</option>
                    <option value="1">Joffrey Baratheon</option>
                    <option value="2">Balon Greyjoy</option>
                    <option value="3">Stannis Baratheon</option>
                    <option value="4">Renly Baratheon</option>
                    <option value="5">Robb Stark</option>
                </select>
            </div>
        </div>
        <button type="button" class="btn btn-primary btn-lg btn-block" id="submit" data-toggle="modal" data-target=".bd-example-modal-lg">Submit</button>
        <hr class="my-4">
    </div>

    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <h1>Best Match:</h1>
            </div>
            <hr>
            <div>
                <div id="bestMatch">

                </div>


            </div>
        </div>
    </div>

    <div class="container">
        <div class="footer">
            <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/AngelMD55/FriendFinder.git">GitHub
                    Repo</a>
        </div>
    </div>

    <style>
        select {
            width: 237px;
        }
    </style>



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script type="text/javascript" src="../data//friends.js"></script>

    <script type="text/javascript">
        let friends;
        let friendsScore;
        let friendsScoreArray = [];

        let newScore = [];
        let newFriendScore;
        function get() {
            $.get("/api/friends", function (data) {
                friends = data;
                for(let i = 0; i <friends.length; i++){
                    friendsScoreArray.push(friends[i].score)
                }
                console.log(friendsScoreArray[0])               
            });
        };

        get();

        $("#submit").on("click", function (event) {
            event.preventDefault();
            let newFriend = {
                name: $("#nameInput").val().trim(),
                photo: $("#linkInput").val().trim(),
                score: [
                    parseInt($("#question1").val().trim()),
                    parseInt($("#question2").val().trim()),
                    parseInt($("#question3").val().trim()),
                    parseInt($("#question4").val().trim()),
                    parseInt($("#question5").val().trim()),
                    parseInt($("#question6").val().trim()),
                    parseInt($("#question7").val().trim()),
                    parseInt($("#question8").val().trim()),
                    parseInt($("#question9").val().trim()),
                    parseInt($("#question10").val().trim())
                ]
            };
            newFriendScore = newFriend.score;
            console.log(newFriendScore)

            // for(let j = 0; j < friendsScoreArray.length; j++){
            //     console.log(friendsScoreArray[j])
            //     for(let k = 0; k <friendsScoreArray[j].length; k++){
            //         newScore.push(parseInt(newFriendScore[k]) - parseInt(friendsScoreArray[j]))
            //     }
            // }
            for(let i = 0; i < newFriendScore.length; i++){
                newScore.push(Math.abs(parseInt(newFriendScore[i]))) - (Math.abs(parseInt((friendsScoreArray[i]))))
            }

            console.log(newScore)

            $("#nameInput").val("");
            $("#linkInput").val("");
            $("#question1").val("");
            $("#question2").val("");
            $("#question3").val("");
            $("#question4").val("");
            $("#question5").val("");
            $("#question6").val("");
            $("#question7").val("");
            $("#question8").val("");
            $("#question9").val("");
            $("#question10").val("");


            $.post("/api/friends", newFriend)
                .then(function (data) {
                    // console.log("---" + data)
                });
        });




    </script>
</body>

</html>